!function(){function n(n,a){var r;if("undefined"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(r=function(n,a){if(!n)return;if("string"==typeof n)return e(n,a);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(n);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return e(n,a)}(n))||a&&n&&"number"==typeof n.length){r&&(n=r);var t=0,o=function(){};return{s:o,n:function(){return t>=n.length?{done:!0}:{done:!1,value:n[t++]}},e:function(n){throw n},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=n[Symbol.iterator]()},n:function(){var n=r.next();return s=n.done,n},e:function(n){l=!0,i=n},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}function e(n,e){(null==e||e>n.length)&&(e=n.length);for(var a=0,r=new Array(e);a<e;a++)r[a]=n[a];return r}var a=function n(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.uncovered=!1,this.hasMine=!1,this.numOfNearbyMines=0,this.markedAsEmpty=!1},r={rows:10,columns:10,numOfMines:20},t={state:"initial",minesLeft:20,time:{minutes:0,seconds:0},rowMineCount:[],columnMineCount:[]},o=[];function i(n){return document.getElementById(n)}var s={nav:{menuBtn:i("menu-btn"),newGameBtn:i("newgame-btn"),mineCounter:document.querySelector("#mine-counter > span"),timer:{minutes:i("#timer-minutes"),seconds:i("#timer-seconds")}},playarea:{columnNums:i("column-nums"),rowNums:i("row-nums"),board:{tiles:null,container:i("board")},winOverlay:{container:i("win-overlay"),newGameBtn:i("win-new-game-btn"),viewBoardBtn:i("win-view-board-btn")},loseOverlay:{container:i("lose-overlay"),newGameBtn:i("lose-new-game-btn"),viewBoardBtn:i("lose-view-board-btn")}},modals:{menu:i("menu-modal")}};function l(n,e){return n<0||n>=r.rows||e<0||e>=r.columns||!o[n][e].hasMine?0:1}function c(n,e){for(var a=0,r=-1;r<=1;r++)for(var t=-1;t<=1;t++)0==r&&0==t||(a+=l(n+r,e+t));o[n][e].numOfNearbyMines=a}function u(){var e="";for(var a in o){for(var i in e+="<div>",o[a])e+='<div data-row="'.concat(a,'" data-column="').concat(i,'"></div>');e+="</div>"}s.playarea.board.container.innerHTML=e,s.playarea.board.tiles=document.querySelectorAll("[data-row][data-column]");var l,u=n(s.playarea.board.tiles);try{var m=function(){var e=l.value;e.addEventListener("mousedown",(function(a){switch(a.which){case 1:!function(e,a){"initial"==t.state?(t.state="underway",function(n,e,a){for(var i=[],s=0;s<r.rows;s++)for(var l=0;l<r.columns;l++)i.push({row:s,column:l});t.rowMineCount=new Array(r.rows).fill(0),t.columnMineCount=new Array(r.columns).fill(0);var u=i.findIndex((function(a){return a.row==n&&a.column==e}));-1!=u&&i.splice(u,1),o[n][e].hasMine=!0;for(var d=1;d<a;d++){var m=Math.floor(Math.random()*i.length);o[i[m].row][i[m].column].hasMine=!0,i.splice(m,1)}for(var f in o)for(var v in o[f])c(parseInt(f),parseInt(v)),o[f][v].hasMine&&(t.rowMineCount[f]++,t.columnMineCount[v]++)}(e,a,r.numOfMines),function(){var e,a="",r=n(t.rowMineCount);try{for(r.s();!(e=r.n()).done;){var o=e.value;a+="<div>".concat(o,"</div>")}}catch(n){r.e(n)}finally{r.f()}s.playarea.rowNums.innerHTML=a,a="";var i,l=n(t.columnMineCount);try{for(l.s();!(i=l.n()).done;){var c=i.value;a+="<div>".concat(c,"</div>")}}catch(n){l.e(n)}finally{l.f()}s.playarea.columnNums.innerHTML=a}(),f(e,a),s.nav.mineCounter.innerHTML=t.minesLeft,t.nothingToSeeHere&&p()):"underway"==t.state&&(f(e,a),s.nav.mineCounter.innerHTML=t.minesLeft)}(parseInt(e.dataset.row),parseInt(e.dataset.column));break;case 3:d(parseInt(e.dataset.row),parseInt(e.dataset.column))}})),e.addEventListener("contextmenu",(function(n){return n.preventDefault(),!1})),e.addEventListener("mouseenter",(function(n){3==n.which&&d(parseInt(e.dataset.row),parseInt(e.dataset.column))}))};for(u.s();!(l=u.n()).done;)m()}catch(n){u.e(n)}finally{u.f()}}function d(n,e){"underway"!=t.state||o[n][e].uncovered||(o[n][e].markedAsEmpty=!o[n][e].markedAsEmpty,o[n][e].markedAsEmpty?m(n,e).innerHTML="X":m(n,e).innerHTML="")}function m(n,e){return s.playarea.board.container.querySelector('[data-row="'.concat(n,'"][data-column="').concat(e,'"]'))}function f(n,e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("underway"!=t.state&&!i||n<0||n>=r.rows||e<0||e>=r.columns||o[n][e].uncovered)return null;if(o[n][e].hasMine&&!o[n][e].markedAsEmpty){m(n,e).innerHTML="<i class='icon-mine'></i>",m(n,e).dataset.clickable="false",o[n][e].uncovered=!0;for(var l=-1;l<=1;l++)for(var c=-1;c<=1;c++)0==l&&0==c||f(n+l,e+c,!0,i);t.minesLeft--,0==t.minesLeft&&"underway"==t.state&&(s.playarea.winOverlay.container.classList.remove("fade"),s.playarea.winOverlay.container.classList.add("visible"),s.playarea.board.container.classList.add("no-input"),t.state="finished")}else a?(o[n][e].uncovered=!0,o[n][e].markedAsEmpty=!1,m(n,e).innerHTML=o[n][e].numOfNearbyMines,m(n,e).dataset.clickable="false"):o[n][e].markedAsEmpty||"underway"!=t.state||(m(n,e).classList.add("wrong-tile"),s.playarea.loseOverlay.container.classList.remove("fade"),s.playarea.loseOverlay.container.classList.add("visible"),s.playarea.board.container.classList.add("no-input"),t.state="finished")}function v(){!function(){o=[];for(var n=0;n<r.rows;n++){o[n]=[];for(var e=0;e<r.columns;e++)o[n][e]=new a}}(),u(),function(){for(var n="",e=0;e<r.rows;e++)n+="<div>#</div>";s.playarea.rowNums.innerHTML=n,n="";for(var a=0;a<r.columns;a++)n+="<div>#</div>";s.playarea.columnNums.innerHTML=n}(),t.state="initial",s.playarea.board.container.classList.remove("no-input"),s.nav.mineCounter.innerHTML=t.minesLeft=r.numOfMines}s.nav.newGameBtn.addEventListener("click",(function(){v()})),s.nav.menuBtn.addEventListener("click",(function(){s.modals.menu.classList.remove("fade"),s.modals.menu.classList.add("visible")})),document.querySelectorAll(".modal-close").forEach((function(n){n.addEventListener("click",(function(){n.parentNode.parentNode.classList.add("fade"),n.parentNode.parentNode.classList.remove("visible")}))})),s.playarea.winOverlay.newGameBtn.addEventListener("click",(function(){v(),s.playarea.winOverlay.container.classList.add("fade"),s.playarea.winOverlay.container.classList.remove("visible")})),s.playarea.winOverlay.viewBoardBtn.addEventListener("click",(function(){s.playarea.winOverlay.container.classList.add("fade"),s.playarea.winOverlay.container.classList.remove("visible")})),s.playarea.loseOverlay.newGameBtn.addEventListener("click",(function(){v(),s.playarea.loseOverlay.container.classList.add("fade"),s.playarea.loseOverlay.container.classList.remove("visible")})),s.playarea.loseOverlay.viewBoardBtn.addEventListener("click",(function(){s.playarea.loseOverlay.container.classList.add("fade"),s.playarea.loseOverlay.container.classList.remove("visible"),function(){for(var n in o)for(var e in o[n])o[n][e].hasMine&&!o[n][e].uncovered?(o[n][e].markedAsEmpty=!1,f(parseInt(n),parseInt(e),!1,!0)):o[n][e].hasMine||0!=o[n][e].numOfNearbyMines||(m(n,e).innerHTML="#")}()})),v();var y=0,w=i("foobar");function p(){s.playarea.board.tiles.forEach((function(n){n.addEventListener("mouseover",(function(){t.moveAlong&&(o[n.dataset.row][n.dataset.column].hasMine?w.style.backgroundColor="#000":w.style.backgroundColor="#FFF")}))}))}document.onkeydown=function(n){n.key=="xyzzy"[y]?y++:y=0,y>=5&&(p(),t.nothingToSeeHere=!0,document.onkeydown=function(n){"Shift"==n.key&&(t.moveAlong=!0)},document.onkeyup=function(n){"Shift"==n.key&&(t.moveAlong=!1)})}}();
//# sourceMappingURL=index.9a7cb81e.js.map
