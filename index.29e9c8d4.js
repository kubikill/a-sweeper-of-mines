!function(){"use strict";class e{uncovered=!1;hasMine=!1;numOfNearbyMines=0;markedAsEmpty=!1}let n={rows:10,columns:10,numOfMines:20};const a={state:"initial",minesLeft:20,time:{minutes:0,seconds:0},rowMineCount:[],columnMineCount:[]};let t,r=[];function s(e){return document.getElementById(e)}const i={nav:{menuBtn:s("menu-btn"),settingsBtn:s("settings-btn"),newGameBtn:s("newgame-btn"),mineCounter:document.querySelector("#mine-counter > span"),timer:{minutes:s("timer-minutes"),seconds:s("timer-seconds")}},playarea:{columnNums:s("column-nums"),rowNums:s("row-nums"),board:{tiles:null,container:s("board")},winOverlay:{container:s("win-overlay"),newGameBtn:s("win-new-game-btn"),viewBoardBtn:s("win-view-board-btn")},loseOverlay:{container:s("lose-overlay"),newGameBtn:s("lose-new-game-btn"),viewBoardBtn:s("lose-view-board-btn")}},modals:{container:s("modals"),menu:{container:s("menu-modal"),btns:s("menu-modal-btns")},settings:{container:s("settings-modal")}}};function o(e,a){return e<0||e>=n.rows||a<0||a>=n.columns||!r[e][a].hasMine?0:1}function l(e,n){let a=0;for(let t=-1;t<=1;t++)for(let r=-1;r<=1;r++)0==t&&0==r||(a+=o(e+t,n+r));r[e][n].numOfNearbyMines=a}function c(e,s){"initial"==a.state?(a.state="underway",function(e,t,s){let i=[];for(let e=0;e<n.rows;e++)for(let a=0;a<n.columns;a++)i.push({row:e,column:a});a.rowMineCount=new Array(n.rows).fill(0),a.columnMineCount=new Array(n.columns).fill(0);let o=i.findIndex((n=>n.row==e&&n.column==t));-1!=o&&i.splice(o,1),r[e][t].hasMine=!0;for(let e=1;e<s;e++){let e=Math.floor(Math.random()*i.length);r[i[e].row][i[e].column].hasMine=!0,i.splice(e,1)}for(let e in r)for(let n in r[e])l(parseInt(e),parseInt(n)),r[e][n].hasMine&&(a.rowMineCount[e]++,a.columnMineCount[n]++)}(e,s,n.numOfMines),function(){let e="";for(let n of a.rowMineCount)e+=`<div>${n}</div>`;i.playarea.rowNums.innerHTML=e,e="";for(let n of a.columnMineCount)e+=`<div>${n}</div>`;i.playarea.columnNums.innerHTML=e}(),u(e,s),i.nav.mineCounter.innerHTML=a.minesLeft,t=setInterval(y,1e3),a.xyzzyActivated&&p()):"underway"==a.state&&(u(e,s),i.nav.mineCounter.innerHTML=a.minesLeft)}function d(e,n){"underway"!=a.state||r[e][n].uncovered||(r[e][n].markedAsEmpty=!r[e][n].markedAsEmpty,r[e][n].markedAsEmpty?m(e,n).innerHTML="X":m(e,n).innerHTML="")}function m(e,n){return i.playarea.board.container.querySelector(`[data-row="${e}"][data-column="${n}"]`)}function u(e,s,o=!1,l=!1){if("underway"!=a.state&&!l||e<0||e>=n.rows||s<0||s>=n.columns||r[e][s].uncovered)return null;if(r[e][s].hasMine&&!r[e][s].markedAsEmpty){m(e,s).innerHTML="<i class='icon-mine'></i>",m(e,s).dataset.clickable="false",r[e][s].uncovered=!0;for(let n=-1;n<=1;n++)for(let a=-1;a<=1;a++)0==n&&0==a||u(e+n,s+a,!0,l);a.minesLeft--,0==a.minesLeft&&"underway"==a.state&&(i.playarea.winOverlay.container.classList.remove("fade"),i.playarea.winOverlay.container.classList.add("visible"),i.playarea.board.container.classList.add("no-input"),a.state="finished",clearInterval(t))}else o?(r[e][s].uncovered=!0,r[e][s].markedAsEmpty=!1,m(e,s).innerHTML=r[e][s].numOfNearbyMines,m(e,s).dataset.clickable="false"):r[e][s].markedAsEmpty||"underway"!=a.state||(m(e,s).classList.add("wrong-tile"),i.playarea.loseOverlay.container.classList.remove("fade"),i.playarea.loseOverlay.container.classList.add("visible"),i.playarea.board.container.classList.add("no-input"),a.state="finished",clearInterval(t))}function y(){a.time.seconds++,a.time.seconds>=60&&(a.time.seconds-=60,a.time.minutes++),a.time.minutes<=9?i.nav.timer.minutes.innerHTML=`0${a.time.minutes}`:i.nav.timer.minutes.innerHTML=a.time.minutes,a.time.seconds<=9?i.nav.timer.seconds.innerHTML=`0${a.time.seconds}`:i.nav.timer.seconds.innerHTML=a.time.seconds}function v(){!function(){r=[];for(let a=0;a<n.rows;a++){r[a]=[];for(let t=0;t<n.columns;t++)r[a][t]=new e}}(),function(){let e="";for(let n in r){e+="<div>";for(let a in r[n])e+=`<div data-row="${n}" data-column="${a}"></div>`;e+="</div>"}i.playarea.board.container.innerHTML=e,i.playarea.board.tiles=document.querySelectorAll("[data-row][data-column]");for(let e of i.playarea.board.tiles)e.addEventListener("mousedown",(n=>{switch(n.which){case 1:c(parseInt(e.dataset.row),parseInt(e.dataset.column));break;case 3:d(parseInt(e.dataset.row),parseInt(e.dataset.column))}})),e.addEventListener("contextmenu",(e=>(e.preventDefault(),!1))),e.addEventListener("mouseenter",(n=>{3==n.which&&d(parseInt(e.dataset.row),parseInt(e.dataset.column))}))}(),function(){let e="";for(let a=0;a<n.rows;a++)e+="<div>#</div>";i.playarea.rowNums.innerHTML=e,e="";for(let a=0;a<n.columns;a++)e+="<div>#</div>";i.playarea.columnNums.innerHTML=e}(),a.state="initial",clearInterval(t),a.time.minutes=0,a.time.seconds=0,i.nav.timer.minutes.innerHTML="00",i.nav.timer.seconds.innerHTML="00",i.playarea.board.container.classList.remove("no-input"),i.nav.mineCounter.innerHTML=a.minesLeft=n.numOfMines}i.nav.newGameBtn.addEventListener("click",(()=>{v()})),document.querySelectorAll("[data-modalopen]").forEach((e=>{e.addEventListener("click",(()=>{i.modals.container.classList.add("visible"),i.modals.container.classList.remove("fade"),document.querySelector(e.dataset.modalopen).classList.add("visible"),document.querySelector(e.dataset.modalopen).classList.remove("fade")}))})),document.querySelectorAll(".modal-close").forEach((e=>{e.addEventListener("click",(()=>{i.modals.container.classList.add("fade"),i.modals.container.classList.remove("visible"),e.parentNode.parentNode.classList.add("fade"),e.parentNode.parentNode.classList.remove("visible")}))})),document.querySelectorAll(".modal").forEach((e=>{e.addEventListener("click",(n=>{n.target===n.currentTarget&&(i.modals.container.classList.add("fade"),i.modals.container.classList.remove("visible"),e.classList.add("fade"),e.classList.remove("visible"))}))})),i.modals.menu.btns.querySelectorAll("button").forEach((e=>{e.addEventListener("click",(()=>{i.modals.menu.container.classList.add("fade"),i.modals.menu.container.classList.remove("visible")}))})),i.playarea.winOverlay.newGameBtn.addEventListener("click",(()=>{v(),i.playarea.winOverlay.container.classList.add("fade"),i.playarea.winOverlay.container.classList.remove("visible")})),i.playarea.winOverlay.viewBoardBtn.addEventListener("click",(()=>{i.playarea.winOverlay.container.classList.add("fade"),i.playarea.winOverlay.container.classList.remove("visible")})),i.playarea.loseOverlay.newGameBtn.addEventListener("click",(()=>{v(),i.playarea.loseOverlay.container.classList.add("fade"),i.playarea.loseOverlay.container.classList.remove("visible")})),i.playarea.loseOverlay.viewBoardBtn.addEventListener("click",(()=>{i.playarea.loseOverlay.container.classList.add("fade"),i.playarea.loseOverlay.container.classList.remove("visible"),function(){for(let e in r)for(let n in r[e])r[e][n].hasMine&&!r[e][n].uncovered?(r[e][n].markedAsEmpty=!1,u(parseInt(e),parseInt(n),!1,!0)):r[e][n].hasMine||0!=r[e][n].numOfNearbyMines||(m(e,n).innerHTML="#")}()})),v();function f(e,n){const a=e.value,t=e.min?e.min:0,r=e.max?e.max:100,s=Number(100*(a-t)/(r-t));n.innerHTML=a,n.style.left=`calc(${s}% + (${8-.15*s}px))`}document.querySelectorAll(".range-wrap").forEach((e=>{const n=e.querySelector('[type="range"]'),a=e.querySelector(".bubble");n.addEventListener("input",(()=>{f(n,a)})),f(n,a)}));let L=0,w=s("xyzzypixel");function p(){i.playarea.board.tiles.forEach((e=>{e.addEventListener("mouseover",(()=>{a.xyzzyShift&&(r[e.dataset.row][e.dataset.column].hasMine?w.style.backgroundColor="#000":w.style.backgroundColor="#FFF")}))}))}document.onkeydown=e=>{e.key=="xyzzy"[L]?L++:L=0,L>=5&&(p(),a.xyzzyActivated=!0,document.onkeydown=e=>{"Shift"==e.key&&(a.xyzzyShift=!0)},document.onkeyup=e=>{"Shift"==e.key&&(a.xyzzyShift=!1)})}}();
//# sourceMappingURL=index.29e9c8d4.js.map
